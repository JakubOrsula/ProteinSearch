<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ProteinSearch">
    <title>ProteinSearch - Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/bootstrap.min.css') }}">
</head>

<body>

<div class="container p-3">
    <div class="row">
        <div class="col">
            <h1>ProteinSearch - Results</h1>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col">
            Most similar objects to the query chain <span class="font-weight-bold">{{ query }}</span> from <span class="font-weight-bold">{{ filename }}
        </div>
    </div>
    <div class="row">
        <div class="col">
            Calculated distances: {{ no_distances }}
        </div>
    </div>
    <div class="row">
        <div class="col">
            <table class="table">
                <tr>
                    <th>No.</th>
                    <th>ID</th>
                    <th>Protein info from PDBe</th>
                    <th>Q-score (with details)</th>

                </tr>
                {% for res in results %}
                    {% set id = res['object'] %}
                    {% set qscore = res['qscore'] %}
                    {% set pdbid = id[:4] %}
                    {% set chain_id = id[4:] %}
                    <tr>
                        <td>
                            {{ loop.index }}
                        </td>
                        <td>
                            {{ id }}
                        </td>
                        <td>
                            <a href="https://www.ebi.ac.uk/pdbe/entry/pdb/{{ pdbid | lower }}" target="_blank">{{ pdbid }}</a>
                        </td>
                        <td>
                            <a href="{{ url_for('get_details', comp_id=comp_id, object=id, chain=query) }}" target="_blank">{{ qscore | round(2) }}</a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4">No objects found!</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <a class="btn btn-primary" href="{{ url_for('index') }}">Back</a>
        </div>
    </div>
</div>


<script src="{{ url_for('static', filename='jquery/jquery-3.4.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='bootstrap/bootstrap.bundle.min.js') }}"></script>
</body>
</html>
